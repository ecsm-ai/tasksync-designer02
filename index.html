<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TaskSync Designer</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; }
    header { background: #4a90e2; color: white; padding: 10px; display: flex; justify-content: space-between; align-items: center; }
    header button { margin-right: 5px; }
    .container { display: flex; height: calc(100vh - 50px); }
    .sidebar { width: 200px; border-right: 1px solid #ccc; padding: 10px; overflow-y: auto; }
    .main { flex: 1; padding: 10px; display: flex; flex-direction: column; }
    .gantt { flex: 1; border: 1px solid #ccc; margin-bottom: 10px; overflow-x: auto; }
    .details { border: 1px solid #ccc; padding: 10px; }
    .dark { background: #222; color: #ddd; }
    .dark header { background: #222; }
    .task-overdue { background: #f88; }
  </style>
</head>
<body>
<header>
  <div>
    <button onclick="filterTasks('all')">ã™ã¹ã¦</button>
    <button onclick="filterTasks('today')">ä»Šæ—¥</button>
    <button onclick="filterTasks('week')">ä»Šé€±</button>
    <button onclick="filterTasks('overdue')">æœŸé™åˆ‡ã‚Œ</button>
  </div>
  <div>
    <button onclick="toggleDarkMode()">ğŸŒ™/â˜€ï¸</button>
  </div>
</header>
<div class="container">
  <div class="sidebar" id="clientList"></div>
  <div class="main">
    <div class="gantt" id="ganttChart">ã‚¬ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆã‚¨ãƒªã‚¢</div>
    <div class="details">
      <h3>ã‚¿ã‚¹ã‚¯è©³ç´°</h3>
      <div id="taskDetails">ã‚¿ã‚¹ã‚¯ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
      <input id="memoInput" placeholder="ãƒ¡ãƒ¢ã‚’è¿½åŠ "/>
      <button onclick="addMemo()">è¿½åŠ </button>
      <button onclick="generateInvoice()">è«‹æ±‚æ›¸ã‚’ä½œæˆ</button>
    </div>
  </div>
</div>

<script>
let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
let currentTaskId = null;

function filterTasks(mode){
  console.log("ãƒ•ã‚£ãƒ«ã‚¿:", mode);
}

function toggleDarkMode(){
  document.body.classList.toggle('dark');
}

function addMemo(){
  if(!currentTaskId) return;
  const txt = document.getElementById('memoInput').value;
  if(!txt) return;
  const task = tasks.find(t=>t.id===currentTaskId);
  task.memos = task.memos || [];
  task.memos.push({text: txt, date: new Date().toLocaleString()});
  localStorage.setItem('tasks', JSON.stringify(tasks));
  document.getElementById('memoInput').value = '';
  showTaskDetails(task);
}

function generateInvoice(){
  if(!currentTaskId) return;
  const task = tasks.find(t=>t.id===currentTaskId);
  const win = window.open();
  win.document.write(`<h1>è«‹æ±‚æ›¸</h1><p>ã‚¿ã‚¹ã‚¯: ${task.name}</p><p>é‡‘é¡: Â¥100,000</p>`);
}

function showTaskDetails(task){
  currentTaskId = task.id;
  let html = `<p>åå‰: ${task.name}</p>`;
  if(task.memos){
    html += `<ul>` + task.memos.map(m=>`<li>${m.date}: ${m.text}</li>`).join('') + `</ul>`;
  }
  document.getElementById('taskDetails').innerHTML = html;
}

// ãƒ‡ãƒ¢ç”¨ã®ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ 
if(tasks.length===0){
  tasks = [
    {id:1, name:'Webã‚µã‚¤ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³', due:'2025-08-15'},
    {id:2, name:'ãƒ­ã‚´åˆ¶ä½œ', due:'2025-08-20'}
  ];
  localStorage.setItem('tasks', JSON.stringify(tasks));
}
document.getElementById('clientList').innerHTML = '<p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆA</p><p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆB</p>';
</script>
</body>
</html>
